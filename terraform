aws configure --profile dev 
why we create profiles ?
--> We create AWS CLI profiles to manage multiple AWS accounts or environments from the same laptop/machine without mixing credentials.
----
Q. in real time we r using 1 aws account for lower env & 1 aws account for prod env? yes separate
----------------
Access Key ID [None]: <DEV_ACCESS_KEY>
AWS Secret Access 
env wise seperate keys
--------------------------------
Q. if i m using separate aws accounts for each env , then terraform workspaces is use in this scenario ? --> no
--------------------------------
aws Multi-account setup (real-time) for each env dev, prod
------------
terraform workspace select dev
terraform workspace select prod
-------------
Q. if i m using modules so I need to create outputs.tf is under the child module or root module in terraform ?
in both modules
-------------
Gitlab runner we hv to install via helm chart in our eks cluster --> So runner as a pod
------------
We hv docker image for gitlab runner
Other wise u can use seperate ec2 for gitlab runner
Jenkins agent as a pod or container for slave
------------
We hv onprem k8s cluster so how to setup cicd pipeline for that
--------
U do ci part with gitalab we have manifest files and java code
----------------
For ci there is no related between gitlab and k8s
------------
Cd part take care by argocd
------------------------
Kubeconfig access from the runner to the on-prem K8s cluster
------------------------
Install GitLab Runner on a jump server inside on-prem
--------------------------
EFA in AWS ‚Üí Elastic Fabric Adapter
--------------------
Q. When your application has mixed workload types (some services need more memory, some need more CPU), the correct approach is:
1Ô∏è‚É£ For Memory-Intensive Services ‚Üí Use R-Series
Examples:
R6g, R6i, R7g, R7i
(R = RAM optimized)
-------------------------
2Ô∏è‚É£ For Compute-Intensive Services ‚Üí Use C-Series  ->
Examples:
C6g, C6i, C7g, C7i
(C = Compute optimized)
--------------------------------
3Ô∏è‚É£ For balanced workloads ‚Üí Use M-Series
Examples:
M6i, M7i, M6g
(M = General purpose)
---------------- family instance sizes -->
‚úî Compute-heavy ‚Üí C series --> kafka 
‚úî Memory-heavy ‚Üí R series --> database
‚úî Normal workloads ‚Üí M series
---------------------------------------------
Q. in terraform if I m using modules like ec2 vpc s3 then I need to write variables.tf & dev.tfvars files inside child module ?
--> Only write variables.tf inside the child module. Do NOT create dev.tfvars inside the child module. tfvars belong only in the root module.
--------------------------------------------------------
dev/prod differ in: configuration values
--> examples: instance size, number of nodes, tags, VPC CIDRs
So tfvars must stay in root.
-------------------------------------------------------
terraform apply -var-file=dev.tfvars
terraform apply -var-file=prod.tfvars
-------------------------
‚û°Ô∏è Child module = main.tf + variables.tf + outputs.tf
‚û°Ô∏è Root module = main.tf + dev.tfvars + prod.tfvars + variables.tf
‚û°Ô∏è NEVER put tfvars inside module
-----------------------------------
Q.)) so my question is why variables.tf in child module as well as in root module ?
--> üìå Module ‡§Æ‡•ç‡§π‡§£‡§ú‡•á ‚Äúfunction‚Äù
üìå Root ‡§Æ‡•ç‡§π‡§£‡§ú‡•á ‚Äúfunction call‚Äù
üìå tfvars ‡§Æ‡•ç‡§π‡§£‡§ú‡•á ‚Äúactual values‚Äù
-----------------------------------------------------
Q. give me variables.tf for ec2 module child module level & 
Q. give me same variables.tf for same ec2 module call in root module
-----------------------------------------------------
Q. if I m declare values in dev.tfvars files and I m declare values in variables.tf 
so here I m using modules so after terraform apply which values terraform pick for create infra ? 
--.‚úî Terraform dev.tfvars ‡§Æ‡§ß‡•Ä‡§≤ value pick ‡§ï‡§∞‡•á‡§≤. ‡§ï‡§æ‡§∞‡§£ tfvars ‡§≤‡§æ ‡§ú‡§æ‡§∏‡•ç‡§§ priority ‡§Ü‡§π‡•á.
-------------------------------------------------------------------------------------
----> üìå Order of priority (most important ‚Üí least important)
1Ô∏è‚É£ tfvars files (dev.tfvars, prod.tfvars)
2Ô∏è‚É£ CLI -var values
3Ô∏è‚É£ variables.tf ‡§Æ‡§ß‡•Ä‡§≤ default values
---------------------------------------------
üîπ 4) Root module ‚Üí child module ‡§≤‡§æ values pass ‡§ï‡§∞‡§§‡•ã
Root ‡§Æ‡•ç‡§π‡§£‡§§‡•ã: ‚ÄúDev.tfvars ‡§Æ‡§ß‡§≤‡§Ç instance_type ‡§ò‡•á ‡§Ü‡§£‡§ø EC2 module ‡§≤‡§æ ‡§¶‡•á.‚Äù
-----------------------------------------------------------------
‚úÖ Terraform ‡§Æ‡§ß‡•ç‡§Ø‡•á root module ‡§Ü‡§£‡§ø child module ‡§¶‡•ã‡§®‡•ç‡§π‡•Ä ‡§†‡§ø‡§ï‡§æ‡§£‡•Ä variables.tf file  ‡§ï‡§æ ‡§≤‡§æ‡§ó‡§§‡§æ‡§§?
--> üëâ Child module ‡§≤‡§æ ‡§∏‡§æ‡§Ç‡§ó‡§æ‡§Ø‡§ö‡§Ç ‡§Ö‡§∏‡§§‡§Ç ‡§ï‡•Ä ‡§§‡•ç‡§Ø‡§æ‡§≤‡§æ ‡§ï‡•ã‡§£‡§§‡•á inputs ‡§≤‡§æ‡§ó‡§£‡§æ‡§∞
üëâ Root module ‡§≤‡§æ ‡§∏‡§æ‡§Ç‡§ó‡§æ‡§Ø‡§ö‡§Ç ‡§Ö‡§∏‡§§‡§Ç ‡§ï‡•Ä ‡§ï‡•ã‡§£‡§§‡•á values environment (dev/prod) ‡§ï‡§°‡•Ç‡§® ‡§Ø‡•á‡§§‡•Ä‡§≤

üîπ 1) Child Module ‡§Æ‡§ß‡§≤‡§Ç variables.tf (module level variables)

‡§π‡§æ ‡§´‡§æ‡§á‡§≤ ‡§Æ‡•ç‡§π‡§£‡§ú‡•á function ‡§ö‡•á parameters ‡§∏‡§Æ‡§ú.
‡§â‡§¶‡§æ:
‡§§‡•Å‡§ù‡§æ EC2 module ‡§Ü‡§π‡•á, ‡§§‡§∞ module ‡§Æ‡•ç‡§π‡§£‡§§‡•ã:
"‡§Æ‡§≤‡§æ instance_type, environment ‡§π‡•á values ‡§¶‡•á! ‡§§‡•á ‡§∂‡§ø‡§µ‡§æ‡§Ø ‡§Æ‡•Ä ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§ ‡§®‡§æ‡§π‡•Ä."
----------------------------------------
variable "instance_type" {}
variable "environment" {}
‡§π‡•á module ‡§ö‡•á input parameters ‡§ù‡§æ‡§≤‡•á.
--------------------
üîπ 2) Root Module ‡§Æ‡§ß‡§≤‡§Ç variables.tf (root level variables)
‡§π‡§æ ‡§´‡§æ‡§á‡§≤ ‡§Æ‡•ç‡§π‡§£‡§ú‡•á ‡§ú‡•á values ‡§¨‡§æ‡§π‡•á‡§∞‡•Ç‡§® (dev.tfvars/prod.tfvars) ‡§Ø‡•á‡§£‡§æ‡§∞ ‡§Ü‡§π‡•á‡§§ ‡§§‡•á define ‡§ï‡§∞‡§§‡•ã.
Root module ‡§´‡§ï‡•ç‡§§ ‡§è‡§µ‡§¢‡§Ç ‡§∏‡§æ‡§Ç‡§ó‡§§‡•ã:
"‡§Æ‡§æ‡§ù‡•ç‡§Ø‡§æ‡§ï‡§°‡•á instance_type ‡§®‡§æ‡§µ‡§æ‡§ö‡§æ variable ‡§Ü‡§π‡•á.
Dev, Prod environment ‡§§‡•ç‡§Ø‡§æ‡§≤‡§æ value ‡§¶‡•á‡§§‡•Ä‡§≤."
-----------------------
variable "instance_type" {}
variable "environment" {}
---------------------------
üîπ 3) dev.tfvars / prod.tfvars --> ‡§á‡§•‡•á actual values ‡§Ö‡§∏‡§§‡§æ‡§§:
instance_type = "t3.small"
environment   = "dev"
---------------------------
üîπ 4) Root module ‚Üí child module ‡§≤‡§æ values pass ‡§ï‡§∞‡§§‡•ã
Root ‡§Æ‡•ç‡§π‡§£‡§§‡•ã: ‚ÄúDev.tfvars ‡§Æ‡§ß‡§≤‡§Ç instance_type ‡§ò‡•á ‡§Ü‡§£‡§ø EC2 module ‡§≤‡§æ ‡§¶‡•á.‚Äù
-------------------------
module "ec2" {
  source        = "./modules/ec2"
  instance_type = var.instance_type
  environment   = var.environment
}
--------------------------------------
üëâ Module = ‡§∏‡§æ‡§Ç‡§ó‡§§‡•ã ‚Äú‡§Æ‡§≤‡§æ ‡§ï‡§æ‡§Ø ‡§™‡§æ‡§π‡§ø‡§ú‡•á‚Äù
üëâ Root = ‡§∏‡§æ‡§Ç‡§ó‡§§‡•ã ‚Äúdev/prod ‡§Æ‡§≤‡§æ values ‡§¶‡•á‡§£‡§æ‡§∞‚Äù
üëâ tfvars = actual dev/prod values
------------------------------------------------
Q. now I hv 3 modules lets say ec2, vpc, s3, so i want to call specific module so how ? 
--> üß† Terraform ‡§•‡•á‡§ü "Only EC2 module run kar" ‡§Ö‡§∏‡§Ç ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§ ‡§®‡§æ‡§π‡•Ä
‡§™‡§£ -target ‡§µ‡§æ‡§™‡§∞‡•Ç‡§® ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§‡•ã
‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï module ‡§ö‡§æ independent tfstate ‡§†‡•á‡§µ‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§´‡§ï‡•ç‡§§ specific module apply ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§‡•ã
--------------------------
‚≠ê Terraform ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä specific module directly run ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§ ‡§®‡§æ‡§π‡•Ä.
Terraform ‡§®‡•á‡§π‡§Æ‡•Ä full plan + apply ‡§ö‡§æ‡§≤‡§µ‡§§‡•ã. ‡§™‡§£ ‡§Ü‡§™‡§£ ‡§´‡§ï‡•ç‡§§ specific module ‡§≤‡§æ affect ‡§ï‡§∞‡§£‡§æ‡§∞‡•á ‡§¨‡§¶‡§≤ ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§‡•ã.
---------------
‚úî BUT‚Ä¶ real-time ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§≤‡•ã‡§ï 2 methods ‡§µ‡§æ‡§™‡§∞‡§§‡§æ‡§§:
‚úÖ METHOD 1: ‡§´‡§ï‡•ç‡§§ ‡§§‡•ç‡§Ø‡§æ module ‡§ö‡•á resources apply ‡§ï‡§∞‡§æ (using -target)
Terraform command:
terraform apply -target=module.ec2
terraform apply -target=module.s3
terraform apply -target=module.vpc
üëâ ‡§π‡•á Terraform ‡§≤‡§æ ‡§∏‡§æ‡§Ç‡§ó‡§§‡§Ç:
‚ÄúPlan/apply ‡§´‡§ï‡•ç‡§§ module.ec2 ‡§ö‡§æ ‡§ï‡§∞‡§æ, ‡§¨‡§æ‡§ï‡•Ä ignore ‡§ï‡§∞.‚Äù
------------------------------
‚úî METHOD 2: Module-specific variable changes ‡§ï‡§∞‡•Ç‡§® apply ‡§ï‡§∞‡§£‡•á
‡§â‡§¶‡§æ: ‡§´‡§ï‡•ç‡§§ EC2 module ‡§∏‡§æ‡§†‡•Ä ‡§¨‡§¶‡§≤ ‡§ï‡•á‡§≤‡•á ‚Üí Terraform apply
Terraform ‡§´‡§ï‡•ç‡§§ ‡§§‡•ç‡§Ø‡§æ ‡§¨‡§¶‡§≤‡§æ‡§Ç‡§®‡§æ compute ‡§ï‡§∞‡•á‡§≤.
-----------------
‚úî METHOD 3: Modules ‡§Ö‡§≤‡§ó tfstate ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§†‡•á‡§µ‡§£‡•á (Best for real companies)
EC2 --> separate state --> ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞ apply
# terraform init -backend-config="key=vpc.tfstate"
# terraform init -backend-config="key=ec2.tfstate"
-----------------------------------
üéØ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ï‡•ã‡§£‡§§‡§æ method ‡§π‡§µ‡§æ‡§Ø?

-target ‡§µ‡§æ‡§™‡§∞‡•Ç‡§®?
Separate state (prod-level best practice)?
‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Æ‡•Ä ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ full folder structure ‡§¶‡•á‡§ä ‡§ï‡§æ ‚Äî multi-module, multi-state?
--------------------
Q. in terraform why we use validation block in real time ?
--> ‚úÖ Terraform ‡§Æ‡§ß‡•ç‡§Ø‡•á validation block ‡§ï‡§æ ‡§µ‡§æ‡§™‡§∞‡§§‡•ã?

üëâ User ‡§ö‡•Å‡§ï‡•Ä‡§ö‡•á values ‡§¶‡•á‡§ä ‡§®‡§Ø‡•á ‡§Æ‡•ç‡§π‡§£‡•Ç‡§®.
üëâ Environment-wise ‡§ö‡•Å‡§ï‡•Ä‡§ö‡•Ä configuration apply ‡§π‡•ã‡§ä ‡§®‡§Ø‡•á ‡§Æ‡•ç‡§π‡§£‡•Ç‡§®.
üëâ Production ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ö‡•Å‡§ï‡•Ä‡§ö‡§æ input ‡§¶‡•á‡§≤‡•ç‡§Ø‡§æ‡§®‡•á ‡§Æ‡•ã‡§†‡§æ ‡§®‡•Å‡§ï‡§∏‡§æ‡§® ‡§π‡•ã‡§ä ‡§®‡§Ø‡•á ‡§Æ‡•ç‡§π‡§£‡•Ç‡§®.
----------
Example 1: ‡§ï‡•ã‡§£‡•Ä ‡§ö‡•Å‡§ï‡•Ä‡§®‡•á ‡§Æ‡•ã‡§†‡§æ expensive instance ‡§ü‡§æ‡§ï‡§≤‡§æ

‡§§‡•Ç dev.tfvars ‡§Æ‡§ß‡•ç‡§Ø‡•á instance_type = "m5.24xlarge" ‡§ü‡§æ‡§ï‡§≤‡§æ‡§∏
(‡§π‡§æ per month ‡§ñ‡•Ç‡§™ ‡§Æ‡§π‡§æ‡§ó ‡§Ü‡§π‡•á) ‡§§‡•Å‡§≤‡§æ ‡§π‡•á ‡§π‡•ã‡§ä ‡§¶‡•ç‡§Ø‡§æ‡§Ø‡§ö‡§Ç‡§ö ‡§®‡§æ‡§π‡•Ä.

--> ‡§§‡§∞ variables.tf ‡§Æ‡§ß‡•ç‡§Ø‡•á validation ‡§†‡•á‡§µ‡§§‡•ã:

variable "instance_type" {
  type = string

  validation {
    condition     = contains(["t2.micro", "t3.small", "t3.medium"], var.instance_type)
    error_message = "Allowed instance types: t2.micro, t3.small, t3.medium only."
  }
}
-----------------------------------
Example 3: CIDR block ‡§ö‡•Å‡§ï‡•Ä‡§ö‡•á ‡§¶‡•á‡§ä ‡§®‡§Ø‡•á
Example 2: Environment ‡§ö‡•Å‡§ï‡•Ä‡§®‡•á dev ‡§ê‡§µ‡§ú‡•Ä prod ‡§ü‡§æ‡§ï‡•Ç ‡§®‡§Ø‡•á
Wrong region
--------------------










