how to use aws lambda function plus event bridge schedule start and stop ec2 instances in dev env ?
----------------1Ô∏è‚É£ Create IAM Role for Lambda
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ec2:StartInstances",
        "ec2:StopInstances",
        "ec2:DescribeInstances"
      ],
      "Resource": "*"
    }
  ]
}
---------------------------
2Ô∏è‚É£ Create Lambda Function
import boto3

def lambda_handler(event, context):
    ec2 = boto3.client('ec2', region_name='ap-south-1')

    # List of instance IDs to stop
    instances = ['i-0123456789abcdef0', 'i-0abcd1234ef567890']

    print("Stopping instances:", instances)
    ec2.stop_instances(InstanceIds=instances)
    print("Stopped instances successfully.")
===========================
3Ô∏è‚É£ Create EventBridge (CloudWatch) Schedule
Go to Amazon EventBridge ‚Üí Rules ‚Üí Create rule
Example 1Ô∏è‚É£ ‚Äî for starting EC2
Name: start-ec2-dev
Schedule pattern (cron):
cron(30 3 ? * MON-FRI *)  
=====
üß† 6Ô∏è‚É£ Real-Time Tip (Marathi-English mix)
Dev env ‡§Æ‡§ß‡•ç‡§Ø‡•á instances full day ‡§ö‡§æ‡§≤‡§µ‡§æ‡§Ø‡§ö‡•Ä ‡§ó‡§∞‡§ú ‡§®‡§∏‡§§‡•á.
Night ‡§≤‡§æ ‡§¨‡§Ç‡§¶ ‡§ï‡•á‡§≤‡•ç‡§Ø‡§æ‡§®‡•á AWS bill ‡§ï‡§Æ‡•Ä ‡§π‡•ã‡§§‡•ã.
‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä tag-based logic ‡§µ‡§æ‡§™‡§∞‡•Ç ‡§∂‡§ï‡§§‡§æ:
e.g. ‡§´‡§ï‡•ç‡§§ "Environment=Dev" ‡§Ö‡§∏‡§≤‡•á‡§≤‡•ç‡§Ø‡§æ instances start/stop ‡§ï‡§∞‡§æ.
Example (tag-based stop code):
==============================
import boto3

def lambda_handler(event, context):
    ec2 = boto3.resource('ec2', region_name='ap-south-1')
    instances = ec2.instances.filter(
        Filters=[{'Name': 'tag:Environment', 'Values': ['Dev']}]
    )

    for instance in instances:
        instance.stop()
        print(f"Stopping {instance.id}")

===================================
